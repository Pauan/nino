var mac: dict %macex: fn {name args body}
  &compile {var name {dict %macex {fn args {&compile body}}}}

#|
var mac: dict %macex: fn {name value}
  let mac (fn {f}
            (dict %macex (fn args (&compile: apply f args))))
    &compile {var name {mac value}}
|#

mac def {name args body}
  {do {var name}
      {set! name {fn args body}}}
